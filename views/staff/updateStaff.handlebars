{{!-- for admin view --}}

<div class="card card-body">
    <h1 class="display-4 text-center">Update Staff Details</h1>
    <hr class="titleHR">
    <form method="POST" action="/staff/admin/save-staff/{{user.id}}?_method=PUT">
        <input type="hidden" name="_method" value="PUT">
        <div class="row">
            <div class="form-group col-6 col-sm-12 col-md-6 col-lg-6">
                <img class="backup_picture border img-thumbnail img-fluid" style="max-height: 360px; max-width: 240px" id="original" src="/uploads/staff_pictures/{{{user.image}}}" ><br>
                <input type="file" id="staffUpload2" name="staffUpload2" accept="image/png, image/jpeg, image/jpg" onchange="staffUpload('/staff/admin/save-staff-picture/{{user.id}}')">
            </div>
            <div class="form-group col-6 col-sm-12 col-md-6 col-lg-6">
                <div class="short-div">
                    <label class="font-italic" for="fname">First Name</label>
                    <input class="form-control" type="text" id="fname" name="fname" value="{{user.fname}}"> 
                </div>
                <div class="short-div">
                    <label class="font-italic" for="lname">Last Name</label>
                    <input class="form-control" type="text" id="lname" name="lname" value="{{user.lname}}">
                </div>
                <div class="short-div">
                    <label class="font-italic">Gender</label>
                    <br>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" id="sFemale" value="Female" name="gender" {{radioCheck user.gender "Female"}}>
                        <label class="form-check-label" for="sFemale">Female</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" id="sMale" value="Male" name="gender" {{radioCheck user.gender "Male"}}>
                        <label class="form-check-label" for="sMale">Male</label>
                    </div>
                    <div class="short-div">
                        <label class="font-italic">Account Type</label>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="Staff" value="Staff" name="type" {{radioCheck user.type "Staff"}}>
                            <label class="form-check-label" for="Staff">Staff</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" id="Admin" value="Admin" name="type" {{radioCheck user.type "Admin"}}>
                            <label class="form-check-label" for="Admin">Admin</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-6 col-sm-12 col-md-6 col-lg-6">
                <div class="form-group">
                    <label class="font-italic" for="sDOB">Date of Birth</label>
                    <input type="date" class="form-control" id="sDOB" name="dob" value="{{user.dob}}" readonly>
                </div>
            </div>
            <div class="col-6 col-sm-12 col-md-6 col-lg-6">
                <div class="form-group">
                    <label class="font-italic" for="sHP">HP</label>
                    <input type="text" class="form-control" id="sHP" name="hp" value="{{user.hp}}" placeholder="6550 9999">
                </div>
            </div>
        </div>
        
        
        <div class="row">
            <div class="form-group col-12 col-sm-12 col-md-12 col-lg-12">
                <label class="font-italic" for="sAddr">Address</label>
                <textarea class="form-control" id="sAddr" name="address" rows="3">{{user.address}}</textarea>
            </div>
        </div>
            
        <div class="row">
            <div class="form-group col-12 col-sm-12 col-md-12 col-lg-12">
                <input type="checkbox" class="" id="resetpw" name="resetpw" value="reset">
                <label class="" for="resetpw">Reset Password</label>
            </div>
        </div>
        <input type="submit" value="Submit" class="btn btn-dark float-right"/>
    </form>
</div>

<script type="text/javascript">
    function staffUpload(url) {
        console.log('fireed')
        let image = $('#staffUpload2')[0].files[0];
        let formdata = new FormData();
        formdata.append('staffUpload2', image);
        $.ajax({
            url: url,
            type: 'POST',
            data: formdata,
            contentType: false,
            processData: false,
            'success': (data) => {
                $('#preview2').attr('src', data.file);
            }
        })
    }
</script>